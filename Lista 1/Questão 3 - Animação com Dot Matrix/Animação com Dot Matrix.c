#include <p18f4520.h>

char animacao[25][8] = {
{
 0B00000000,
 0B00000000,
 0B00000000,
 0B00000000,
 0B00000000,
 0B00000000,
 0B00000000,
 0B00000000
},{
 0B00000000,
 0B00000001,
 0B00000001,
 0B00000001,
 0B00000001,
 0B00000001,
 0B00000001,
 0B00000001
},{
 0B00000000,
 0B00000011,
 0B00000010,
 0B00000010,
 0B00000011,
 0B00000010,
 0B00000010,
 0B00000011
},{
 0B00000000,
 0B00000111,
 0B00000100,
 0B00000100,
 0B00000111,
 0B00000100,
 0B00000100,
 0B00000111
},{
 0B00000000,
 0B00001111,
 0B00001000,
 0B00001000,
 0B00001111,
 0B00001000,
 0B00001000,
 0B00001111
},{
 0B00000000,
 0B00011110,
 0B00010001,
 0B00010001,
 0B00011110,
 0B00010001,
 0B00010001,
 0B00011110
},{
 0B00000000,
 0B00111100,
 0B00100010,
 0B00100010,
 0B00111100,
 0B00100010,
 0B00100010,
 0B00111100
},{
 0B00000000,
 0B01111001,
 0B01000101,
 0B01000101,
 0B01111001,
 0B01000101,
 0B01000101,
 0B01111001
},{
 0B00000000,
 0B11110011,
 0B10001010,
 0B10001010,
 0B11110011,
 0B10001010,
 0B10001010,
 0B11110011
},{
 0B00000000,
 0B11100111,
 0B00010100,
 0B00010100,
 0B11100111,
 0B00010100,
 0B00010100,
 0B11100111
},{
 0B00000000,
 0B11100111,
 0B00010100,
 0B00010100,
 0B11100111,
 0B00010100,
 0B00010100,
 0B11100111
},{
 0B00000000,
 0B11001110,
 0B00101000,
 0B00101000,
 0B11001110,
 0B00101000,
 0B00101000,
 0B11001110
},{
 0B00000000,
 0B10011100,
 0B01010001,
 0B01010001,
 0B10011101,
 0B01010001,
 0B01010001,
 0B10011101
},{
 0B00000000,
 0B00111001,
 0B10100010,
 0B10100010,
 0B00111011,
 0B10100010,
 0B10100010,
 0B00111010
},{
 0B00000000,
 0B00111001,
 0B10100010,
 0B10100010,
 0B00111011,
 0B10100010,
 0B10100010,
 0B00111010
},{
 0B00000000,
 0B01110011,
 0B01000100,
 0B01000100,
 0B01110111,
 0B01000100,
 0B01000100,
 0B01110100
},{
 0B00000000,
 0B11100110,
 0B10001001,
 0B10001001,
 0B11101111,
 0B10001001,
 0B10001001,
 0B11101001
},{
 0B00000000,
 0B11001100,
 0B00010010,
 0B00010010,
 0B11011110,
 0B00010010,
 0B00010010,
 0B11010010
},{
 0B00000000,
 0B10011000,
 0B00100100,
 0B00100100,
 0B10111100,
 0B00100100,
 0B00100100,
 0B10100100
},{
 0B00000000,
 0B00110000,
 0B01001000,
 0B01001000,
 0B01111000,
 0B01001000,
 0B01001000,
 0B01001000
},{
 0B00000000,
 0B01100000,
 0B10010000,
 0B10010000,
 0B11110000,
 0B10010000,
 0B10010000,
 0B10010000
},{
 0B00000000,
 0B11000000,
 0B00100000,
 0B00100000,
 0B11100000,
 0B00100000,
 0B00100000,
 0B00100000
},{
 0B00000000,
 0B10000000,
 0B01000000,
 0B01000000,
 0B11000000,
 0B01000000,
 0B01000000,
 0B01000000
},{
 0B00000000,
 0B10000000,
 0B10000000,
 0B10000000,
 0B10000000,
 0B10000000,
 0B10000000,
 0B10000000
},{
 0B00000000,
 0B00000000,
 0B00000000,
 0B00000000,
 0B00000000,
 0B00000000,
 0B00000000,
 0B00000000
}
};

char varredura[] =
{
 0B11111110,
 0B11111101,
 0B11111011,
 0B11110111,
 0B11101111,
 0B11011111,
 0B10111111,
 0B01111111
};

void milis(void){
	unsigned char j;
	unsigned int i;
	for (i = 0; i < 103; i++){
		j=0;
	}
}

void delay_ms(int ms){

	for (ms; ms > 0; ms--){
		milis();
	}
}


void delay (int s){

	unsigned long int i;
	for (s; s > 0; s--){
		for(i = 0; i > 83333; i++){ //loop demora 1 segundo
		}
	}
}

void mostra_animacao()
{
	int frame, quadro, velocidade;
		for(frame=0;frame<25;frame++)
			{
				for(velocidade=0;velocidade<3;velocidade++)
					{
						for(quadro=0;quadro<8;quadro++)
							{
								PORTD = 0B11111111;
								delay_ms(1);
								PORTC = animacao[frame][quadro];
								PORTB = animacao[frame-8][quadro];
								PORTD = varredura[quadro];
								delay_ms(6);
							}
					}
		
			}
}

void conf()
{
	TRISC = 0b00000000; //LINHAS DOT 1
	TRISD = 0b00000000; //COLUNAS
	TRISB = 0b00000000; //LINHAS DOT 2
}
main()
{
	conf();
	while(1)
	{
		mostra_animacao();
	}	
}